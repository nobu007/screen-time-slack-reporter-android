version: "1.1"
run_id: "audit-run-003"
timestamp: "2026-01-31T06:15:00Z"
previous_run: "audit-run-002"

# === ギャップ分析 ===
gaps:
  - id: "GAP-001"
    category: "Quality"
    description: "カバレッジ計測環境が未構築"
    intent: "QA-001: >= 70% (measured by JaCoCo)"
    reality: "JaCoCoプラグイン不在、計測不能"
    severity: "high"
    impact: "品質の定量評価ができない"
    recommended_action: "JaCoCoプラグインを追加し、レポート生成タスクを有効化する"
    status: "resolved"
    resolved_at: "2026-01-31T06:12:58Z"
    resolution: "15_executor により JaCoCo 設定完了。./gradlew jacocoTestReport で計測可能"

  - id: "GAP-002"
    category: "Quality"
    description: "テストカバレッジが目標に達していない可能性が高い"
    intent: "QA-001: >= 70%"
    reality: "テストファイルが2つのみ（CoreFunctionVerificationTest, SlackWebhookValidatorTest）"
    severity: "high"
    impact: "主要ロジック（ViewModel, UseCase, Repository）が未検証"
    recommended_action: "ViewModel, UseCase, Repositoryのユニットテストを追加"

  - id: "GAP-003"
    category: "Documentation"
    description: "スクリーンショットがREADMEにない"
    intent: "README.md:15 (TODO: アプリのスクリーンショットを追加)"
    reality: "TODOコメントのまま"
    severity: "low"
    impact: "ユーザーがアプリのイメージを掴みにくい"
    recommended_action: "アプリのスクリーンショットを撮影しREADMEに追加"

  - id: "GAP-004"
    category: "Verification"
    description: "検証スクリプトの実行環境依存"
    intent: "CF-001〜CF-005の自動検証"
    reality: "Android依存コード（UsageStatsManager等）は実機/エミュレータなしでは検証困難"
    severity: "medium"
    impact: "CIでの自動検証が難しい"
    recommended_action: "Robolectric導入またはInstrumented Testの拡充"

  - id: "GAP-005"
<<<<<<< /home/jinno/screen-time-slack-reporter-android/.audit/analysis/gap.yml
    category: "Environment"
    description: "Java 24環境でビルド・テスト実行不可"
    intent: "./gradlew test が正常実行できる"
    reality: "Java 24 と Gradle 8.13/AGP の互換性問題により実行不可"
    severity: "high"
    impact: "開発環境でテスト実行できない、CI/CDでも同様の問題が発生する可能性"
    recommended_action: "gradle.properties で Java toolchain を 17 に設定、または Java 17 JDK 環境を使用"
    source: "execution/feedback_to_auditor.yml:ISS-NEW-003"

  - id: "GAP-006"
    category: "Quality"
    description: "テストファイル数が不足しており70%カバレッジ達成困難"
    intent: "QA-001: >= 70% カバレッジ"
    reality: "テストファイル2個（CoreFunctionVerificationTest, SlackWebhookValidatorTest）のみ"
    severity: "high"
    impact: "ViewModel, UseCase, Repository の主要ロジックが未検証"
    recommended_action: "HomeViewModelTest, SettingsViewModelTest, GetTodayUsageUseCaseTest, UsageRepositoryTest 等を追加"
    source: "execution/feedback_to_auditor.yml:ISS-NEW-004"
=======
    category: "Build"
    description: "Gradle 8.13とJaCoCo 0.8.12の互換性問題"
    intent: "QA-001: JaCoCoでカバレッジ計測が可能"
    reality: "jacocoTestReportタスク生成時に'Type T not present'エラー"
    severity: "high"
    impact: "テストカバレッジを計測できない"
    recommended_action: "JaCoCoプラグイン設定の簡素化またはGradleバージョン調整"
>>>>>>> /home/jinno/.windsurf/worktrees/screen-time-slack-reporter-android/screen-time-slack-reporter-android-8ee80409/.audit/analysis/gap.yml
